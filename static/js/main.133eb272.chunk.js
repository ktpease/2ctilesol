(this.webpackJsonpnikakudori=this.webpackJsonpnikakudori||[]).push([[0],{17:function(e,t,i){},18:function(e,t,i){},26:function(e,t){},27:function(e,t,i){},29:function(e,t,i){"use strict";i.r(t);var n=i(4),s=i.n(n),o=i(7),l=i.n(o),a=(i(17),i(18),i(10)),c=i(8),d=i(9),r=i(12),h=i(11),u=i(6),g=i.n(u),b=(i(27),i(0));function p(e){var t=parseInt(e.tile,10);if(isNaN(t)||t<0||t>=42)return e.glyph?Object(b.jsx)("span",{className:"game-tile-glyph game-tile-empty",children:"\ud83c\udc2b\ufe0e"}):Object(b.jsx)("span",{className:"game-tile-emoji game-tile-empty",children:"\ud83c\udc2b"});var i="";if(e.selected?i="game-tile-selected":e.hinted&&(i="game-tile-hinted"),e.glyph){var n="";return t>=7&&t<=15||4===t?n="game-tile-glyph-red":t>=16&&t<=24||5===t?n="game-tile-glyph-green":t>=25&&t<=33||6===t?n="game-tile-glyph-blue":t>=34&&t<=37?n="game-tile-glyph-flowers":t>=38&&t<=41&&(n="game-tile-glyph-seasons"),Object(b.jsxs)("span",{className:"game-tile-glyph ".concat(n," ").concat(i," ").concat(e.pointer?"game-tile-pointer":""),onClick:e.onClick,children:[String.fromCodePoint(126976+t),"\ufe0e"]})}return Object(b.jsx)("span",{className:"game-tile-emoji ".concat(i," ").concat(e.pointer?"game-tile-pointer":""),onClick:e.onClick,children:String.fromCodePoint(126976+t)})}var f=function(e){Object(r.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).state={useEmoji:!1,boardWidth:17,boardHeight:8,seed:1,tiles:[],selectedTile:null,hintedTiles:[],showMatchingTiles:!0,allowDeselect:!0},n}return Object(d.a)(i,[{key:"componentDidMount",value:function(){this.checkEmojiMode(),this.generateBoard(null)}},{key:"checkEmojiMode",value:function(){window.navigator&&/Windows NT \d{2}/.test(window.navigator.userAgent)&&this.setState({useEmoji:!0})}},{key:"generateBoard",value:function(e){for(var t=[],i=[],n=0,s=-1,o=-1,l=isNaN(parseInt(e,10))?g()().int32()>>>0:parseInt(e,10)>>>0,c=g()(l),d=Object(a.a)(Array(34).keys()),r=0,h=d.length-1;h>0;h--)r=Math.floor(c()*(h+1)),s=d[h],d[h]=d[r],d[r]=s;for(var u=0;u<this.state.boardWidth+2;u++)n=t.push({id:n,char:null});for(var b=0;b<this.state.boardHeight;b++){n=t.push({id:n,char:null});for(var p=0;p<this.state.boardWidth;p++)0===(o=(o+1)%4)&&(s=(s+1)%d.length),i.push(n),n=t.push({id:n,char:d[s]});n=t.push({id:n,char:null})}for(var f=0;f<this.state.boardWidth+2;f++)n=t.push({id:n,char:null});for(var m=i.length-1;m>0;m--)r=Math.floor(c()*(m+1)),s=t[i[m]].char,t[i[m]].char=t[i[r]].char,t[i[r]].char=s;console.log("Game board seed is ".concat(l)),this.setState({tiles:t,seed:l,selectedTile:null,hintedTiles:[]})}},{key:"handleTileClick",value:function(e){var t=this;if(this.state.selectedTile!==e){if(console.debug("Clicked ".concat(e)),null!==this.state.selectedTile&&this.state.tiles[e].char===this.state.tiles[this.state.selectedTile].char){var i=this.checkValidPath(e,this.state.selectedTile);if(null!==i){console.debug(i);var n=this.state.tiles.slice();return n[e].char=null,n[this.state.selectedTile].char=null,void this.setState({tiles:n,selectedTile:null,hintedTiles:[]})}}if(!0!==this.state.showMatchingTiles)this.setState({selectedTile:e});else{var s=this.state.tiles.filter((function(i){return i.char===t.state.tiles[e].char}));this.setState({hintedTiles:s,selectedTile:e})}}else!0===this.state.allowDeselect&&(this.setState({selectedTile:null,hintedTiles:[]}),console.debug("Unclicked ".concat(e)))}},{key:"checkValidPath",value:function(e,t){if(e===t)return null;var i=this.state.boardWidth+2,n=this.state.boardHeight+2,s=[],o=null,l=t%i-e%i,a=(t-t%i-(e-e%i))/i,c=0;console.debug("tile X delta: ".concat(l)),console.debug("tile Y delta: ".concat(a)),(0!==a||l>0)&&s.push([{segment:[e],dir:"R"}]),(0!==a||l<0)&&s.push([{segment:[e],dir:"L"}]),(0!==l||a>0)&&s.push([{segment:[e],dir:"D"}]),(0!==l||a<0)&&s.push([{segment:[e],dir:"U"}]);for(var d=0;d<s.length;d++)console.debug(s[d]);for(;s.length>0;){var r=s.pop();if(c++,console.debug("Checking path: ".concat(r.at(-1).segment," | ").concat(r.at(-1).dir," | length: ").concat(r.length," | queue: ").concat(s.length)),null===o||3!==r.length){var h=r.at(-1),u=h.segment.at(-1),g=void 0;switch(h.dir){case"R":if((g=this.state.tiles[u+1]).id===t){if(console.debug("- Found simplest path?"),h.segment.push(g.id),r.length<3)return console.debug("-- It is!"),console.debug("".concat(c," PATHS EATEN")),r;console.debug("-- Maybe?"),o=r;continue}if(null!==g.char){console.debug("- Obstruction in path");continue}if(h.segment.push(g.id),r.length<3&&(2!==r.length||t%i===g.id%i))if(t<g.id){console.debug("- Add path U");var b=r.slice();b.push({segment:[g.id],dir:"U"}),s.push(b)}else if(t>g.id){console.debug("- Add path D");var p=r.slice();p.push({segment:[g.id],dir:"D"}),s.push(p)}if(2===r.length&&t%i<g.id%i||g.id%i===i-1){console.debug("- Do not proceed further, will miss");continue}console.debug("- Continuing path"),s.push(r);continue;case"L":if((g=this.state.tiles[u-1]).id===t){if(console.debug("- Found simplest path"),h.segment.push(g.id),r.length<3)return console.debug("-- It is!"),console.debug("".concat(c," PATHS EATEN")),r;console.debug("-- Maybe?"),o=r;continue}if(null!==g.char){console.debug("- Obstruction in path");continue}if(h.segment.push(g.id),r.length<3&&(2!==r.length||t%i===g.id%i))if(t<g.id){console.debug("- Add path U");var f=r.slice();f.push({segment:[g.id],dir:"U"}),s.push(f)}else if(t>g.id){console.debug("- Add path D");var m=r.slice();m.push({segment:[g.id],dir:"D"}),s.push(m)}if(2===r.length&&t%i>g.id%i||g.id%i===0){console.debug("- Do not proceed further, will miss");continue}console.debug("- Continuing path"),s.push(r);continue;case"D":if((g=this.state.tiles[u+i]).id===t){if(console.debug("- Found simplest path"),h.segment.push(g.id),r.length<3)return console.debug("-- It is!"),console.debug("".concat(c," PATHS EATEN")),r;console.debug("-- Maybe?"),o=r;continue}if(null!==g.char){console.debug("- Obstruction in path");continue}if(h.segment.push(g.id),r.length<3&&(2!==r.length||t-t%i===g.id-g.id%i))if(t%i<g.id%i){console.debug("- Add path L");var v=r.slice();v.push({segment:[g.id],dir:"L"}),s.push(v)}else if(t%i>g.id%i){console.debug("- Add path R");var j=r.slice();j.push({segment:[g.id],dir:"R"}),s.push(j)}if(2===r.length&&t<g.id||g.id>=i*(n-1)){console.debug("- Do not proceed further, will miss");continue}console.debug("- Continuing path"),s.push(r);continue;case"U":if((g=this.state.tiles[u-i]).id===t){if(console.debug("- Found simplest path"),h.segment.push(g.id),r.length<3)return console.debug("-- It is!"),console.debug("".concat(c," PATHS EATEN")),r;console.debug("-- Maybe?"),o=r;continue}if(null!==g.char){console.debug("- Obstruction in path");continue}if(h.segment.push(g.id),r.length<3&&(2!==r.length||t-t%i===g.id-g.id%i))if(t%i<g.id%i){console.debug("- Add path L");var T=r.slice();T.push({segment:[g.id],dir:"L"}),s.push(T)}else if(t%i>g.id%i){console.debug("- Add path R");var k=r.slice();k.push({segment:[g.id],dir:"R"}),s.push(k)}if(2===r.length&&t>g.id||g.id<i){console.debug("- Do not proceed further, will miss");continue}console.debug("- Continuing path"),s.push(r);continue}}else console.debug("- Looking for less-line paths")}return console.debug("".concat(c," PATHS EATEN")),o}},{key:"renderHorizontalMap",value:function(){for(var e=this,t=[],i=0;i<this.state.boardHeight;i++)t[i]=Object(b.jsx)("div",{children:this.state.tiles.slice((i+1)*(this.state.boardWidth+2)+1,(i+2)*(this.state.boardWidth+2)-1).map((function(t){return e.renderTile(t)}))},"board-hori-row"+i);return t}},{key:"renderVerticalMap",value:function(){for(var e=this,t=[],i=function(i){t[i]=Object(b.jsx)("div",{children:e.state.tiles.slice(e.state.boardWidth+2,(e.state.boardWidth+2)*(e.state.boardHeight+1)).filter((function(t,n){return n%(e.state.boardWidth+2)===i+1})).reverse().map((function(t){return e.renderTile(t)}))},"board-vert-row"+i)},n=0;n<this.state.boardWidth;n++)i(n);return t}},{key:"renderTile",value:function(e){var t=this;return Object(b.jsx)(p,{tile:e.char,glyph:!this.state.useEmoji,selected:e.id===this.state.selectedTile,hinted:this.state.hintedTiles.includes(e),onClick:function(){return t.handleTileClick(e.id)}},e.id)}},{key:"render",value:function(){var e=this;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"game-board game-board-horizontal ".concat(this.state.useEmoji?"game-board-emoji":"game-board-glyph"),children:this.renderHorizontalMap()}),Object(b.jsx)("div",{className:"game-board game-board-vertical ".concat(this.state.useEmoji?"game-board-emoji":"game-board-glyph"),children:this.renderVerticalMap()}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){return e.setState((function(e){return{useEmoji:!e.useEmoji}}))},children:"Change tile type"}),Object(b.jsx)("button",{onClick:function(){return e.generateBoard()},children:"New board"}),Object(b.jsx)("button",{onClick:function(){return e.generateBoard(e.state.seed)},children:"Reset board"})]}),Object(b.jsxs)("div",{children:["Board #",this.state.seed]})]})})}}]),i}(s.a.Component);var m=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(f,{})})},v=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,30)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,o=t.getLCP,l=t.getTTFB;i(e),n(e),s(e),o(e),l(e)}))};l.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(m,{})}),document.getElementById("root")),v()}},[[29,1,2]]]);
//# sourceMappingURL=main.133eb272.chunk.js.map