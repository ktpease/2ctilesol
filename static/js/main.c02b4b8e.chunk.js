(this.webpackJsonp2ctilesol=this.webpackJsonp2ctilesol||[]).push([[0],{27:function(e,t,i){},28:function(e,t,i){},47:function(e,t){},49:function(e,t,i){},50:function(e,t,i){},51:function(e,t,i){},52:function(e,t,i){"use strict";i.r(t);var n=i(1),s=i.n(n),a=i(12),r=i.n(a),l=(i(27),i(28),i(7)),o=i(18),c=i(19),d=i(22),h=i(21),u=i(13),g=i.n(u);var f=i(8),m=i.n(f);var p=i(0);function b(e){var t=parseInt(e.tile,10);if(isNaN(t)||t<0||t>=43)return e.glyph?Object(p.jsx)("span",{className:"game-tile-glyph game-tile-empty",children:"\ud83c\udc2b\ufe0e"}):Object(p.jsx)("span",{className:"game-tile-emoji game-tile-empty",children:"\ud83c\udc2b"});var i="";if(e.selected?i="game-tile-selected":e.hinted?i="game-tile-hinted":e.highlighted&&(i="game-tile-highlighted"),e.glyph){var n="";return t>=7&&t<=15||4===t?(n="game-tile-glyph-red",4===t&&e.fixChromeAndroidEmojiBug&&(t=6)):t>=16&&t<=24||5===t?n="game-tile-glyph-green":t>=25&&t<=33||6===t?n="game-tile-glyph-blue":t>=34&&t<=37?n="game-tile-glyph-flowers":t>=38&&t<=41&&(n="game-tile-glyph-seasons"),Object(p.jsxs)("span",{className:"game-tile-glyph ".concat(n," ").concat(i," ").concat(e.pointer?"game-tile-pointer":""," ").concat(e.fade?"game-tile-anim-fadeout":""),onClick:e.onClick,children:[String.fromCodePoint(126976+t),"\ufe0e"]})}return Object(p.jsx)("span",{className:"game-tile-emoji ".concat(i," ").concat(e.pointer?"game-tile-pointer":""," ").concat(e.fade?"game-tile-anim-fadeout":""),onClick:e.onClick,children:String.fromCodePoint(126976+t)})}function v(e){if(e.node&&e.node.length>0){var t="";return e.node.forEach((function(e,i){0===i&&(t="game-path-"),t=t.concat(e)})),Object(p.jsx)("span",{className:"game-path ".concat(t," game-path-anim-fadeout")})}return null}var j=i(20),O=s.a.forwardRef((function(e,t){var i=Object(j.useStopwatch)({autoStart:!0}),n=i.seconds,a=i.minutes,r=i.hours,l=i.start,o=i.pause,c=i.reset;return s.a.useImperativeHandle(t,(function(){return{start:l,pause:o,reset:c,seconds:n,minutes:a,hours:r}})),Object(p.jsxs)("span",{style:{textAlign:"center"},children:[r.toString().padStart(2,"0"),":",a.toString().padStart(2,"0"),":",n.toString().padStart(2,"0")]})})),S=function(e){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:["Board #",e.seed,", ",e.layout]}),Object(p.jsxs)("div",{children:["Current number of tiles that can be matched: ",e.tilesMatchable]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.newBoardModal,children:"Start New Board"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:function(){return e.handleResetBoard(e.seed)},children:"Reset Current Board"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.handleUndoMatch,disabled:e.canUndo,children:"Undo Last Match"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.advancedSettingsModal,children:"Advanced Options"})})]})},x=i(3),M=function(e){var t=Object(n.useState)(e.prevWidth),i=Object(x.a)(t,2),s=i[0],a=i[1],r=Object(n.useState)(e.prevHeight),l=Object(x.a)(r,2),o=l[0],c=l[1],d=Object(n.useState)(e.prevWidth),h=Object(x.a)(d,2),u=h[0],g=h[1],f=Object(n.useState)(e.prevHeight),m=Object(x.a)(f,2),b=m[0],v=m[1],j=Object(n.useState)(e.prevBlindShuffle),O=Object(x.a)(j,2),S=O[0],M=O[1],T=Object(n.useState)(e.prevNoSinglePairs),y=Object(x.a)(T,2),w=y[0],k=y[1],A=Object(n.useState)(e.prevSeed),R=Object(x.a)(A,2),C=R[0],B=R[1],H=Object(n.useState)(!1),E=Object(x.a)(H,2),N=E[0],L=E[1],D=Object(n.useState)(!1),W=Object(x.a)(D,2),P=W[0],z=W[1],U=Object(n.useState)(!1),V=Object(x.a)(U,2),F=V[0],I=V[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Start New Board"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Board Size"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"radio",name:"size",id:"sizeShort",value:"short",onChange:function(){a(8),c(5),z(!1),I(!0)}}),Object(p.jsx)("label",{htmlFor:"sizeShort",children:"Short (8\u2a2f5)"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"radio",name:"size",id:"sizeMedium",value:"medium",onChange:function(){a(12),c(7),z(!1),I(!0)}}),Object(p.jsx)("label",{htmlFor:"sizeMedium",children:"Medium (12\u2a2f7)"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"radio",name:"size",id:"sizeLarge",value:"large",onChange:function(){a(17),c(8),z(!1),I(!0)}}),Object(p.jsx)("label",{htmlFor:"sizeLarge",children:"Large (17\u2a2f8)"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"radio",name:"size",id:"sizeCustom",value:"custom",onChange:function(){z(!0),I(!0)}}),Object(p.jsx)("label",{htmlFor:"sizeCustom",children:"Custom"})]}),Object(p.jsxs)("div",{style:{visibility:P?"visible":"hidden"},children:[Object(p.jsx)("input",{type:"range",id:"customWidth",min:"2",max:"20",value:u,onChange:function(e){var t=e.target.value;g(t)}}),Object(p.jsxs)("label",{htmlFor:"customWidth",children:[u," Board Width"]})]}),Object(p.jsxs)("div",{style:{visibility:P?"visible":"hidden"},children:[Object(p.jsx)("input",{type:"range",id:"customHeight",min:"2",max:"12",value:b,onChange:function(e){var t=e.target.value;v(t)}}),Object(p.jsxs)("label",{htmlFor:"customHeight",children:[b," Board Height"]})]})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Advanced Options"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",id:"optTrueShuffle",checked:S,onChange:function(){return M(!S)}}),Object(p.jsx)("label",{htmlFor:"optHard",children:"Enable True Shuffle. This is more difficult as it may generate unwinnable boards!"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",id:"optNoSinglePairs",checked:w,onChange:function(){return k(!w)}}),Object(p.jsx)("label",{htmlFor:"optNoSinglePairs",children:"Force Multiple Pairs Per Tile. This makes smaller boards easier."})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{type:"checkbox",id:"optSeed",checked:N,onChange:function(){return L(!N)}}),Object(p.jsx)("label",{htmlFor:"optSeed",children:"Use custom board number"})]}),Object(p.jsxs)("div",{style:{visibility:N?"visible":"hidden"},children:[Object(p.jsx)("input",{type:"text",id:"optSeedNumber",value:C,onChange:function(e){var t=e.target.value;B(t)}}),Object(p.jsx)("label",{htmlFor:"optSeedNumber",children:"Board Number"})]})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{disabled:!F,onClick:function(){return e.handleResetBoard(N?parseInt(C):null,P?parseInt(u):s,P?parseInt(b):o,S,w)},children:"Start New Board"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.backModal,children:"Go Back"})})]})},T=function(e){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:e.toggleHighlightAllMatches,children:"Toggle Highlight All Matches"}),Object(p.jsx)("button",{onClick:e.toggleHighlightMatchesForTile,children:"Toggle Highlight Matching Tiles"}),Object(p.jsx)("button",{onClick:e.toggleEmojiMode,children:"Change tile type"})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.backModal,children:"Back to Settings"})})]})},y=function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"You Win!"}),Object(p.jsxs)("div",{children:["You cleared all ",e.numTiles," tiles in",e.clearTimeHours?" ".concat(e.clearTimeHours," hour").concat(e.clearTimeHours>1?"s":"")+(e.clearTimeMinutes||e.clearTimeSeconds?",":""):"",e.clearTimeMinutes?" ".concat(e.clearTimeMinutes," minute").concat(e.clearTimeMinutes>1?"s":"")+(e.clearTimeSeconds?",":""):"",e.clearTimeSeconds?" ".concat(e.clearTimeSeconds," second").concat(e.clearTimeSeconds>1?"s":""):"","!"]}),Object(p.jsxs)("div",{children:["Board #",e.seed,", ",e.layout]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.handleResetBoard,children:"Start New Board with Same Layout"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.newBoardModal,children:"Start New Board"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:function(){return e.handleResetBoard(e.seed)},children:"Reset Current Board"})})]})},w=function(e){return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"You Have No Valid Moves!"}),Object(p.jsxs)("div",{children:["You still have ",e.remainingTiles," tiles remaining, but cannot match any more tiles!"]}),Object(p.jsxs)("div",{children:["Board #",e.seed,", ",e.layout]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.handleUndoMatch,disabled:e.canUndo,children:"Undo Last Match"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:function(){return e.handleResetBoard(e.seed)},children:"Reset Current Board"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.handleResetBoard,children:"Start New Board with Same Layout"})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{onClick:e.newBoardModal,children:"Start New Board"})})]})};i(49),i(50),i(51);g.a.setAppElement(document.getElementById("root"));var k=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(o.a)(this,i),(n=t.call(this,e)).gameStateVer=3,n.state={useEmoji:!1,allowDeselect:!0,showMatchingTiles:!1,showAllValidMatches:!1,fixChromeAndroidEmojiBug:!1,gameEnded:!1,showModal:!1,modalState:null,boardWidth:17,boardHeight:8,seed:1,blindShuffle:!1,noSinglePairs:!1,layoutDescription:"Rectangle 17\u2a2f8",tiles:[],selectedTile:null,totalMatchableTiles:136,tileHistory:[],hintedTiles:[],allValidMatchingTiles:[],pathingTiles:[],pathingTilesAlt:[],useAltPathingTiles:!1,horizontalTileMap:[],verticalTileMap:[]},n.timerRef=s.a.createRef(),n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){var e=this;this.checkFontCompatibility();var t=this.getStateFromLocal();if(null!==t&&"v"in t&&t.v===this.gameStateVer)try{this.setState({tiles:t.tiles.map((function(e,t){return{id:t,char:e,inRemovalAnim:!1}})),boardWidth:t.boardWidth,boardHeight:t.boardHeight,seed:t.seed,blindShuffle:t.blindShuffle,noSinglePairs:t.noSinglePairs,layoutDescription:t.layoutDescription,totalMatchableTiles:t.totalMatchableTiles,tileHistory:t.tileHistory},(function(){e.generateHorizontalMap(),e.generateVerticalMap(),e.checkAllValidMatches();var i=new Date;i.setSeconds(i.getSeconds()+t.timer.seconds+60*t.timer.minutes+3600*t.timer.hours),e.timerRef.current.reset(i)}))}catch(i){this.resetBoard(null,17,8)}else this.resetBoard()}},{key:"getStateFromLocal",value:function(){if("undefined"===typeof localStorage)return null;try{localStorage.setItem("test","1"),"1"===localStorage.getItem("test")&&localStorage.removeItem("test")}catch(t){return null}var e=localStorage.getItem("gamestate");return null!==e?JSON.parse(e):null}},{key:"saveStateToLocal",value:function(){if("undefined"!==typeof localStorage){try{localStorage.setItem("test","1"),"1"===localStorage.getItem("test")&&localStorage.removeItem("test")}catch(e){return}localStorage.setItem("gamestate",JSON.stringify({v:this.gameStateVer,tiles:this.state.tiles.map((function(e){return e.inRemovalAnim?null:e.char})),boardWidth:this.state.boardWidth,boardHeight:this.state.boardHeight,seed:this.state.seed,blindShuffle:this.state.blindShuffle,noSinglePairs:this.state.noSinglePairs,layoutDescription:this.state.layoutDescription,totalMatchableTiles:this.state.totalMatchableTiles,tileHistory:this.state.tileHistory,timer:{seconds:this.timerRef.current.seconds,minutes:this.timerRef.current.minutes,hours:this.timerRef.current.hours}}))}}},{key:"checkFontCompatibility",value:function(){var e=this;navigator.userAgentData?navigator.userAgentData.getHighEntropyValues(["platform","platformVersion"]).then((function(t){"Windows"===t.platform&&parseInt(t.platformVersion)>=10&&e.setState({useEmoji:!0})})):window.navigator&&/Windows NT \d{2}/.test(window.navigator.userAgent)&&this.setState({useEmoji:!0}),(navigator.userAgentData?!0===navigator.userAgentData.brands.some((function(e){return"Chromium"===e.brand}))&&!0===navigator.userAgentData.mobile:window.navigator&&window.navigator.userAgent.includes("Chrome")&&window.navigator.userAgent.includes("Mobile"))&&this.setState({fixChromeAndroidEmojiBug:!0})}},{key:"resetBoard",value:function(e,t,i,n,s){var a,r=this,o=void 0!==t?t:this.state.boardWidth,c=void 0!==i?i:this.state.boardHeight,d=void 0!==n?n:this.state.blindShuffle,h=void 0!==s?s:this.state.noSinglePairs;a=d?function(e,t,i,n){for(var s=[],a=[],r=0,o=-1,c=-1,d=0,h=0,u=isNaN(parseInt(e,10))?m()().int32()>>>0:parseInt(e,10)>>>0,g=m()(u),f=Object(l.a)(Array(34).keys()),p=f.length-1;p>0;p--)d=Math.floor(g()*(p+1)),o=f[p],f[p]=f[d],f[d]=o;for(var b=t%2!==0&&i%2!==0,v=0;v<t+2;v++)r=s.push({id:r,char:null,inRemovalAnim:!1});for(var j=0;j<i;j++){r=s.push({id:r,char:null,inRemovalAnim:!1});for(var O=0;O<t;O++)b&&O===t>>1&&j===i>>1?r=s.push({id:r,char:null,inRemovalAnim:!1}):(0===(c=(c+1)%(!0===n?4:2))&&(o=(o+1)%f.length),a.push(r),r=s.push({id:r,char:f[o],inRemovalAnim:!1}),h++);r=s.push({id:r,char:null,inRemovalAnim:!1})}for(var S=0;S<t+2;S++)r=s.push({id:r,char:null,inRemovalAnim:!1});for(var x=a.length-1;x>0;x--)d=Math.floor(g()*(x+1)),o=s[a[x]].char,s[a[x]].char=s[a[d]].char,s[a[d]].char=o;return{tiles:s,seed:u,totalMatchableTiles:h}}(e,o,c,h):function(e,t,i,n){var s,a=[],r=0,o=-1,c=0,d=0,h=isNaN(parseInt(e,10))?m()().int32()>>>0:parseInt(e,10)>>>0,u=m()(h),g=Object(l.a)(Array(34).keys()),f=t*i>>1;if(f<(n?g.length<<1:g.length)){for(var p=g.length-1;p>0;p--)c=Math.floor(u()*(p+1)),o=g[p],g[p]=g[c],g[c]=o;g=g.slice(0,n?f>>1:f)}for((s=n?g.concat(g):g.slice()).sort((function(e,t){return e-t}));s.length<f;){for(var b=g.slice(),v=b.length-1;v>0;v--)c=Math.floor(u()*(v+1)),o=b[v],b[v]=b[c],b[c]=o;s=s.concat(b)}for(var j=(s=s.slice(0,f)).length-1;j>0;j--)c=Math.floor(u()*(j+1)),o=s[j],s[j]=s[c],s[c]=o;for(var O=0;O<t+2;O++)r=a.push({id:r,char:null,inRemovalAnim:!1});for(var S=0;S<i;S++){r=a.push({id:r,char:null,inRemovalAnim:!1});for(var x=0;x<t;x++)r=a.push({id:r,char:-1,inRemovalAnim:!1}),d++;r=a.push({id:r,char:null,inRemovalAnim:!1})}for(var M=0;M<t+2;M++)r=a.push({id:r,char:null,inRemovalAnim:!1});t%2!==0&&i%2!==0&&(a[a.length>>1].char=null);for(var T=[],y=t+2;y<a.length-(t+2);y++)-1!==a[y].char||-1===a[y-1].char&&-1===a[y+1].char&&-1===a[y-(t+2)].char&&-1===a[y+(t+2)].char||T.push(y);for(var w=function(e){var n=T[Math.floor(u()*T.length)];-1!==a[n-1].char||T.includes(n-1)||T.push(n-1),-1!==a[n+1].char||T.includes(n+1)||T.push(n+1),-1!==a[n-(t+2)].char||T.includes(n-(t+2))||T.push(n-(t+2)),-1!==a[n+(t+2)].char||T.includes(n+(t+2))||T.push(n+(t+2)),T=T.filter((function(e){return e!==n}));var r=function(e,t,i,n,s){var a=i+2,r=n+2,l=[],o=s.slice(),c=[],d=[];o.forEach((function(e){c.push(e%a),d.push(e-e%a)})),o.length>1&&(c.sort((function(e,t){return e-t})),d.sort((function(e,t){return e-t})));var h=[];for(h.push([{segment:[e],dir:"R"}]),h.push([{segment:[e],dir:"L"}]),h.push([{segment:[e],dir:"U"}]),h.push([{segment:[e],dir:"D"}]);h.length>0;){var u=h.pop(),g=u.at(-1),f=g.segment.at(-1),m=void 0;switch(g.dir){case"R":if(m=t[f+1],o.includes(m.id)){if(l.push({tile:m.id,lines:u.length}),o.splice(o.indexOf(m.id),1),0===o.length)break;o.forEach((function(e){c.push(e%a),d.push(e-e%a)})),o.length>1&&(c.sort((function(e,t){return e-t})),d.sort((function(e,t){return e-t})));continue}if(-1===m.char)continue;if(g.segment.push(m.id),u.length<3&&(2!==u.length||c.includes(m.id%a))){if(d[0]<m.id-m.id%a){var p=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));p.push({segment:[m.id],dir:"U"}),h.push(p)}if(d.at(-1)>m.id-m.id%a){var b=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));b.push({segment:[m.id],dir:"D"}),h.push(b)}}if(2===u.length&&c.at(-1)<m.id%a||m.id%a===a-1)continue;h.push(u);continue;case"L":if(m=t[f-1],o.includes(m.id)){if(l.push({tile:m.id,lines:u.length}),o.splice(o.indexOf(m.id),1),0===o.length)break;o.forEach((function(e){c.push(e%a),d.push(e-e%a)})),o.length>1&&(c.sort((function(e,t){return e-t})),d.sort((function(e,t){return e-t})));continue}if(-1===m.char)continue;if(g.segment.push(m.id),u.length<3&&(2!==u.length||c.includes(m.id%a))){if(d[0]<m.id-m.id%a){var v=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));v.push({segment:[m.id],dir:"U"}),h.push(v)}if(d.at(-1)>m.id-m.id%a){var j=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));j.push({segment:[m.id],dir:"D"}),h.push(j)}}if(2===u.length&&c[0]>m.id%a||m.id%a===0)continue;h.push(u);continue;case"D":if(m=t[f+a],o.includes(m.id)){if(l.push({tile:m.id,lines:u.length}),o.splice(o.indexOf(m.id),1),0===o.length)break;o.forEach((function(e){c.push(e%a),d.push(e-e%a)})),o.length>1&&(c.sort((function(e,t){return e-t})),d.sort((function(e,t){return e-t})));continue}if(-1===m.char)continue;if(g.segment.push(m.id),u.length<3&&(2!==u.length||d.includes(m.id-m.id%a))){if(c[0]<m.id%a){var O=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));O.push({segment:[m.id],dir:"L"}),h.push(O)}if(c.at(-1)>m.id%a){var S=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));S.push({segment:[m.id],dir:"R"}),h.push(S)}}if(2===u.length&&d.at(-1)<m.id-m.id%a||m.id>=a*(r-1))continue;h.push(u);continue;case"U":if(m=t[f-a],o.includes(m.id)){if(l.push({tile:m.id,lines:u.length}),o.splice(o.indexOf(m.id),1),0===o.length)break;o.forEach((function(e){c.push(e%a),d.push(e-e%a)})),o.length>1&&(c.sort((function(e,t){return e-t})),d.sort((function(e,t){return e-t})));continue}if(-1===m.char)continue;if(g.segment.push(m.id),u.length<3&&(2!==u.length||d.includes(m.id-m.id%a))){if(c[0]<m.id%a){var x=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));x.push({segment:[m.id],dir:"L"}),h.push(x)}if(c.at(-1)>m.id%a){var M=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));M.push({segment:[m.id],dir:"R"}),h.push(M)}}if(2===u.length&&d[0]>m.id-m.id%a||m.id<a)continue;h.push(u);continue}}return l}(n,a,t,i,T);if(void 0===r||0===r.length)return console.warn("Presolve-shuffle detected an unmatching tile! This is bad."),"continue";var l=r.filter((function(e){return e.lines>1})),o=l.length>0?l[Math.floor(u()*l.length)].tile:r[Math.floor(u()*r.length)].tile;a[n].char=s[e],a[o].char=s[e],-1!==a[o-1].char||T.includes(o-1)||T.push(o-1),-1!==a[o+1].char||T.includes(o+1)||T.push(o+1),-1!==a[o-(t+2)].char||T.includes(o-(t+2))||T.push(o-(t+2)),-1!==a[o+(t+2)].char||T.includes(o+(t+2))||T.push(o+(t+2)),T=T.filter((function(e){return e!==o}))},k=0;k<f;k++)w(k);return{tiles:a,seed:h,totalMatchableTiles:d}}(e,o,c,h);var u="Rectangle ".concat(o,"\u2a2f").concat(c).concat(d?" TrueShuffle":"").concat(h?" NoSinglePairs":"");this.setState({tiles:a.tiles,boardWidth:o,boardHeight:c,seed:a.seed,blindShuffle:d,noSinglePairs:h,layoutDescription:u,totalMatchableTiles:a.totalMatchableTiles,selectedTile:null,tileHistory:[],hintedTiles:[],allValidMatches:[],pathingTiles:[],pathingTilesAlt:[],showModal:!1,gameEnded:!1},(function(){r.generateHorizontalMap(),r.generateVerticalMap(),r.checkAllValidMatches(),r.timerRef.current.reset(),r.saveStateToLocal()}))}},{key:"checkAllValidMatches",value:function(){var e=this,t=function(e,t,i){var n=t+2,s=i+2,a=[];return e.forEach((function(t){if(null!==t.char&&!0!==t.inRemovalAnim){for(var i=[],r=t.id+1;r<e.length;r++)e[r].char===t.char&&!1===e[r].inRemovalAnim&&i.push(r);if(0!==i.length){var l=[],o=[];i.forEach((function(e){l.push(e%n),o.push(e-e%n)})),i.length>1&&(l.sort((function(e,t){return e-t})),o.sort((function(e,t){return e-t})));var c=[];for(c.push([{segment:[t.id],dir:"R"}]),c.push([{segment:[t.id],dir:"L"}]),c.push([{segment:[t.id],dir:"U"}]),c.push([{segment:[t.id],dir:"D"}]);c.length>0;){var d=c.pop(),h=d.at(-1),u=h.segment.at(-1),g=void 0;switch(h.dir){case"R":if(g=e[u+1],i.includes(g.id)){if(a.push([t.id,g.id]),i.splice(i.indexOf(g.id),1),0===i.length)break;i.forEach((function(e){l.push(e%n),o.push(e-e%n)})),i.length>1&&(l.sort((function(e,t){return e-t})),o.sort((function(e,t){return e-t})));continue}if(null!==g.char&&!0!==g.inRemovalAnim)continue;if(h.segment.push(g.id),d.length<3&&(2!==d.length||l.includes(g.id%n))){if(o[0]<g.id-g.id%n){var f=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));f.push({segment:[g.id],dir:"U"}),c.push(f)}if(o.at(-1)>g.id-g.id%n){var m=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));m.push({segment:[g.id],dir:"D"}),c.push(m)}}if(2===d.length&&l.at(-1)<g.id%n||g.id%n===n-1)continue;c.push(d);continue;case"L":if(g=e[u-1],i.includes(g.id)){if(a.push([t.id,g.id]),i.splice(i.indexOf(g.id),1),0===i.length)break;i.forEach((function(e){l.push(e%n),o.push(e-e%n)})),i.length>1&&(l.sort((function(e,t){return e-t})),o.sort((function(e,t){return e-t})));continue}if(null!==g.char&&!0!==g.inRemovalAnim)continue;if(h.segment.push(g.id),d.length<3&&(2!==d.length||l.includes(g.id%n))){if(o[0]<g.id-g.id%n){var p=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));p.push({segment:[g.id],dir:"U"}),c.push(p)}if(o.at(-1)>g.id-g.id%n){var b=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));b.push({segment:[g.id],dir:"D"}),c.push(b)}}if(2===d.length&&l[0]>g.id%n||g.id%n===0)continue;c.push(d);continue;case"D":if(g=e[u+n],i.includes(g.id)){if(a.push([t.id,g.id]),i.splice(i.indexOf(g.id),1),0===i.length)break;i.forEach((function(e){l.push(e%n),o.push(e-e%n)})),i.length>1&&(l.sort((function(e,t){return e-t})),o.sort((function(e,t){return e-t})));continue}if(null!==g.char&&!0!==g.inRemovalAnim)continue;if(h.segment.push(g.id),d.length<3&&(2!==d.length||o.includes(g.id-g.id%n))){if(l[0]<g.id%n){var v=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));v.push({segment:[g.id],dir:"L"}),c.push(v)}if(l.at(-1)>g.id%n){var j=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));j.push({segment:[g.id],dir:"R"}),c.push(j)}}if(2===d.length&&o.at(-1)<g.id-g.id%n||g.id>=n*(s-1))continue;c.push(d);continue;case"U":if(g=e[u-n],i.includes(g.id)){if(a.push([t.id,g.id]),i.splice(i.indexOf(g.id),1),0===i.length)break;i.forEach((function(e){l.push(e%n),o.push(e-e%n)})),i.length>1&&(l.sort((function(e,t){return e-t})),o.sort((function(e,t){return e-t})));continue}if(null!==g.char&&!0!==g.inRemovalAnim)continue;if(h.segment.push(g.id),d.length<3&&(2!==d.length||o.includes(g.id-g.id%n))){if(l[0]<g.id%n){var O=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));O.push({segment:[g.id],dir:"L"}),c.push(O)}if(l.at(-1)>g.id%n){var S=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));S.push({segment:[g.id],dir:"R"}),c.push(S)}}if(2===d.length&&o[0]>g.id-g.id%n||g.id<n)continue;c.push(d);continue}}}}})),a}(this.state.tiles,this.state.boardWidth,this.state.boardHeight);this.setState({allValidMatchingTiles:Object(l.a)(new Set(t.flat()))},(function(){0===t.length&&(e.timerRef.current.pause(),e.setState({gameEnded:!0}),e.state.totalMatchableTiles-2*e.state.tileHistory.length>0?e.showModal("Game Lost"):e.showModal("Game Won"))}))}},{key:"handleTileClick",value:function(e){var t=this;if(null!==this.state.tiles[e].char&&!0!==this.state.tiles[e].inRemovalAnim)if(this.state.selectedTile!==e){if(null!==this.state.selectedTile&&this.state.tiles[e].char===this.state.tiles[this.state.selectedTile].char){var i=function(e,t,i,n,s){if(e===t)return null;var a=n+2,r=s+2,l=[],o=null,c=t%a-e%a,d=(t-t%a-(e-e%a))/a;for((0!==d||c>0)&&l.push([{segment:[e],dir:"R"}]),(0!==d||c<0)&&(c<0?l.push([{segment:[e],dir:"L"}]):l.unshift([{segment:[e],dir:"L"}])),(0!==c||d>0)&&(d>=0?l.push([{segment:[e],dir:"D"}]):l.unshift([{segment:[e],dir:"D"}])),(0!==c||d<0)&&l.push([{segment:[e],dir:"U"}]);l.length>0;){var h=l.pop();if(null===o||3!==h.length){var u=h.at(-1),g=u.segment.at(-1),f=void 0;switch(u.dir){case"R":if((f=i[g+1]).id===t){if(u.segment.push(f.id),h.length<3)return h;o=h;continue}if(null!==f.char&&!0!==f.inRemovalAnim)continue;if(u.segment.push(f.id),h.length<3&&(2!==h.length||t%a===f.id%a))if(t-t%a<f.id-f.id%a){var m=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));m.push({segment:[f.id],dir:"U"}),d<0?l.push(m):l.unshift(m)}else if(t-t%a>f.id-f.id%a){var p=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));p.push({segment:[f.id],dir:"D"}),d>=0?l.push(p):l.unshift(p)}if(2===h.length&&t%a<f.id%a||f.id%a===a-1)continue;c>=0?l.push(h):l.unshift(h);continue;case"L":if((f=i[g-1]).id===t){if(u.segment.push(f.id),h.length<3)return h;o=h;continue}if(null!==f.char&&!0!==f.inRemovalAnim)continue;if(u.segment.push(f.id),h.length<3&&(2!==h.length||t%a===f.id%a))if(t-t%a<f.id-f.id%a){var b=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));b.push({segment:[f.id],dir:"U"}),d<0?l.push(b):l.unshift(b)}else if(t-t%a>f.id-f.id%a){var v=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));v.push({segment:[f.id],dir:"D"}),d>=0?l.push(v):l.unshift(v)}if(2===h.length&&t%a>f.id%a||f.id%a===0)continue;c<0?l.push(h):l.unshift(h);continue;case"D":if((f=i[g+a]).id===t){if(u.segment.push(f.id),h.length<3)return h;o=h;continue}if(null!==f.char&&!0!==f.inRemovalAnim)continue;if(u.segment.push(f.id),h.length<3&&(2!==h.length||t-t%a===f.id-f.id%a))if(t%a<f.id%a){var j=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));j.push({segment:[f.id],dir:"L"}),c<0?l.push(j):l.unshift(j)}else if(t%a>f.id%a){var O=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));O.push({segment:[f.id],dir:"R"}),c>=0?l.push(O):l.unshift(O)}if(2===h.length&&t-t%a<f.id-f.id%a||f.id>=a*(r-1))continue;d>=0?l.push(h):l.unshift(h);continue;case"U":if((f=i[g-a]).id===t){if(u.segment.push(f.id),h.length<3)return h;o=h;continue}if(null!==f.char&&!0!==f.inRemovalAnim)continue;if(u.segment.push(f.id),h.length<3&&(2!==h.length||t-t%a===f.id-f.id%a))if(t%a<f.id%a){var S=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));S.push({segment:[f.id],dir:"L"}),c<0?l.push(S):l.unshift(S)}else if(t%a>f.id%a){var x=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));x.push({segment:[f.id],dir:"R"}),c>=0?l.push(x):l.unshift(x)}if(2===h.length&&t-t%a>f.id-f.id%a||f.id<a)continue;d<0?l.push(h):l.unshift(h);continue}}}return o}(e,this.state.selectedTile,this.state.tiles.slice(),this.state.boardWidth,this.state.boardHeight);if(null!==i){var n=this.state.tiles.slice();n.forEach((function(e){!0===e.inRemovalAnim&&(e.inRemovalAnim=!1,e.char=null)})),n[e].inRemovalAnim=!0,n[this.state.selectedTile].inRemovalAnim=!0;var s=this.state.tileHistory.slice();s.push({char:this.state.tiles[e].char,tile1:e,tile2:this.state.selectedTile});var a=this.state.tiles.map((function(){return[]}));return i.forEach((function(e){e.segment.forEach((function(t){a[t].push(e.dir)}))})),a[this.state.selectedTile].push("-start"),a[e].push("-end"),this.setState({tiles:n,selectedTile:null,tileHistory:s,hintedTiles:[]},(function(){t.checkAllValidMatches(),t.state.gameEnded||t.saveStateToLocal()})),void(!0===this.state.useAltPathingTiles?this.setState((function(e){return{pathingTiles:e.tiles.map((function(){return[]})),pathingTilesAlt:a,useAltPathingTiles:!1}})):this.setState((function(e){return{pathingTiles:a,pathingTilesAlt:e.tiles.map((function(){return[]})),useAltPathingTiles:!0}})))}}if(!0!==this.state.showMatchingTiles)this.setState({selectedTile:e});else{var r=this.state.tiles.filter((function(i){return i.char===t.state.tiles[e].char}));this.setState({hintedTiles:r,selectedTile:e})}}else!0===this.state.allowDeselect&&this.setState({selectedTile:null,hintedTiles:[]})}},{key:"undoMatch",value:function(e){var t=this;if(this.state.tileHistory.length>0){var i=this.state.tiles.slice(),n=this.state.tileHistory.pop();i[n.tile1].char=n.char,i[n.tile1].inRemovalAnim=!1,i[n.tile2].char=n.char,i[n.tile2].inRemovalAnim=!1,this.setState({tiles:i,hintedTiles:[],pathingTiles:[],pathingTilesAlt:[],selectedTile:null,gameEnded:!1},(function(){e&&t.hideModal(),t.checkAllValidMatches(),t.saveStateToLocal()}))}}},{key:"showModal",value:function(e){this.timerRef.current.pause(),e?this.setState({showModal:!0,modalState:e}):this.setState({showModal:!0})}},{key:"hideModal",value:function(){this.state.gameEnded||this.timerRef.current.start(),this.setState({showModal:!1})}},{key:"renderModalBody",value:function(e){var t=this;switch(e){case"Settings":return Object(p.jsx)(S,{seed:this.state.seed,layout:this.state.layoutDescription,canUndo:0===this.state.tileHistory.length,tilesMatchable:this.state.allValidMatchingTiles.length,handleResetBoard:this.resetBoard.bind(this),handleUndoMatch:function(){t.undoMatch(!0)},newBoardModal:function(){return t.showModal("New Board")},advancedSettingsModal:function(){return t.showModal("Advanced Settings")}});case"Advanced Settings":return Object(p.jsx)(T,{toggleHighlightAllMatches:function(){return t.setState((function(e){return{showAllValidMatches:!e.showAllValidMatches}}))},toggleHighlightMatchesForTile:function(){return t.setState((function(e){return{showMatchingTiles:!e.showMatchingTiles}}))},toggleEmojiMode:function(){return t.setState((function(e){return{useEmoji:!e.useEmoji}}))},backModal:function(){return t.showModal("Settings")}});case"New Board":return Object(p.jsx)(M,{prevWidth:this.state.boardWidth,prevHeight:this.state.boardHeight,prevBlindShuffle:this.state.blindShuffle,prevNoSinglePairs:this.state.noSinglePairs,prevSeed:this.state.seed,handleResetBoard:this.resetBoard.bind(this),backModal:function(){return t.showModal("Settings")}});case"Game Won":return Object(p.jsx)(y,{numTiles:this.state.totalMatchableTiles,clearTimeHours:this.timerRef.current.hours,clearTimeMinutes:this.timerRef.current.minutes,clearTimeSeconds:this.timerRef.current.seconds,seed:this.state.seed,layout:this.state.layoutDescription,handleResetBoard:this.resetBoard.bind(this),newBoardModal:function(){return t.showModal("New Board")}});case"Game Lost":return Object(p.jsx)(w,{remainingTiles:this.state.totalMatchableTiles-2*this.state.tileHistory.length,seed:this.state.seed,layout:this.state.layoutDescription,canUndo:0===this.state.tileHistory.length,handleUndoMatch:function(){return t.undoMatch(!0)},handleResetBoard:this.resetBoard.bind(this),newBoardModal:function(){return t.showModal("New Board")}});default:return null}}},{key:"generateHorizontalMap",value:function(){for(var e=[],t=0;t<this.state.boardHeight+2;t++)e[t]=this.state.tiles.slice(t*(this.state.boardWidth+2),(t+1)*(this.state.boardWidth+2));this.setState({horizontalTileMap:e})}},{key:"renderHorizontalMap",value:function(){var e=this,t=[];if("undefined"!==typeof this.state.horizontalTileMap){for(var i=0;i<this.state.horizontalTileMap.length;i++)t[i]=Object(p.jsx)("div",{children:this.state.horizontalTileMap[i].map((function(t){return e.renderTileAndPath(t,"hori")}))},"board-hori-row"+i);return t}}},{key:"generateVerticalMap",value:function(){for(var e=this,t=[],i=function(i){t[i]=e.state.tiles.filter((function(t,n){return n%(e.state.boardWidth+2)===i})).reverse()},n=0;n<this.state.boardWidth+2;n++)i(n);this.setState({verticalTileMap:t})}},{key:"renderVerticalMap",value:function(){var e=this,t=[];if("undefined"!==typeof this.state.verticalTileMap){for(var i=0;i<this.state.verticalTileMap.length;i++)t[i]=Object(p.jsx)("div",{children:this.state.verticalTileMap[i].map((function(t){return e.renderTileAndPath(t,"vert")}))},"board-vert-row"+i);return t}}},{key:"renderTileAndPath",value:function(e,t){var i=this;return Object(p.jsxs)("span",{children:[Object(p.jsx)(b,{tile:e.char,glyph:!this.state.useEmoji,selected:e.id===this.state.selectedTile,hinted:this.state.hintedTiles.includes(e)&&!e.inRemovalAnim,highlighted:this.state.showAllValidMatches&&this.state.allValidMatchingTiles.includes(e.id),fade:e.inRemovalAnim,onClick:function(){return i.handleTileClick(e.id)},fixChromeAndroidEmojiBug:this.state.fixChromeAndroidEmojiBug}),Object(p.jsx)(v,{node:this.state.pathingTiles[e.id]}),Object(p.jsx)(v,{node:this.state.pathingTilesAlt[e.id]})]},e.id)}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"game-board game-board-horizontal game-board-size-".concat(this.state.boardHeight," ").concat(this.state.useEmoji?"game-board-emoji":"game-board-glyph"),children:this.renderHorizontalMap()}),Object(p.jsx)("div",{className:"game-board game-board-vertical game-board-size-".concat(this.state.boardHeight," ").concat(this.state.useEmoji?"game-board-emoji":"game-board-glyph"),children:this.renderVerticalMap()})]}),Object(p.jsxs)("div",{className:"game-bar",children:[Object(p.jsx)(O,{ref:this.timerRef}),Object(p.jsx)("button",{className:"settings-button ".concat(this.state.showModal?"settings-button-opened":""),onClick:function(){return e.showModal("Settings")},children:"\u2699"}),Object(p.jsx)("button",{className:"undo-button",onClick:function(){return e.undoMatch(!1)},disabled:0===this.state.tileHistory.length,children:"\u21b6"})]}),Object(p.jsxs)(g.a,{isOpen:this.state.showModal,contentLabel:this.state.modalState,onRequestClose:function(){return e.hideModal()},shouldCloseOnOverlayClick:!1,children:[this.renderModalBody(this.state.modalState),Object(p.jsx)("button",{onClick:function(){return e.hideModal()},children:"Close"})]})]})}}]),i}(s.a.Component);var A=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(k,{})})},R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function C(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var i=e.installing;null!=i&&(i.onstatechange=function(){"installed"===i.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var B=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,53)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;i(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(A,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/2ctilesol",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/2ctilesol","/service-worker.js");R?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(i){var n=i.headers.get("content-type");404===i.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,t)})).catch((function(){}))}(t,e),navigator.serviceWorker.ready.then((function(){}))):C(t,e)}))}}(),B()}},[[52,1,2]]]);
//# sourceMappingURL=main.c02b4b8e.chunk.js.map