(this.webpackJsonpnikakudori=this.webpackJsonpnikakudori||[]).push([[0],{17:function(e,t,i){},18:function(e,t,i){},26:function(e,t){},28:function(e,t,i){},29:function(e,t,i){"use strict";i.r(t);var n=i(4),s=i.n(n),a=i(7),o=i.n(a),l=(i(17),i(18),i(10)),r=i(8),c=i(9),d=i(12),h=i(11),u=i(6),g=i.n(u);var m=i(0);function p(e){var t=parseInt(e.tile,10);if(isNaN(t)||t<0||t>=43)return e.glyph?Object(m.jsx)("span",{className:"game-tile-glyph game-tile-empty",children:"\ud83c\udc2b\ufe0e"}):Object(m.jsx)("span",{className:"game-tile-emoji game-tile-empty",children:"\ud83c\udc2b"});var i="";if(e.selected?i="game-tile-selected":e.hinted&&(i="game-tile-hinted"),e.glyph){var n="";return t>=7&&t<=15||4===t?n="game-tile-glyph-red":t>=16&&t<=24||5===t?n="game-tile-glyph-green":t>=25&&t<=33||6===t?n="game-tile-glyph-blue":t>=34&&t<=37?n="game-tile-glyph-flowers":t>=38&&t<=41&&(n="game-tile-glyph-seasons"),Object(m.jsxs)("span",{className:"game-tile-glyph ".concat(n," ").concat(i," ").concat(e.pointer?"game-tile-pointer":""," ").concat(e.fade?"game-tile-anim-fadeout":""),onClick:e.onClick,children:[String.fromCodePoint(126976+t),"\ufe0e"]})}return Object(m.jsx)("span",{className:"game-tile-emoji ".concat(i," ").concat(e.pointer?"game-tile-pointer":""," ").concat(e.fade?"game-tile-anim-fadeout":""),onClick:e.onClick,children:String.fromCodePoint(126976+t)})}function f(e){if(e.node&&e.node.length>0){var t="";return e.node.forEach((function(e,i){0===i&&(t="game-path-"),t=t.concat(e)})),Object(m.jsx)("span",{className:"game-path ".concat(t," game-path-anim-fadeout")})}return null}i(28);var b=function(e){Object(d.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(r.a)(this,i),(n=t.call(this,e)).state={useEmoji:!1,boardWidth:17,boardHeight:8,seed:1,tiles:[],selectedTile:null,hintedTiles:[],pathingTiles:[],pathingTilesAlt:[],useAltPathingTiles:!1,showMatchingTiles:!0,allowDeselect:!0,horizontalTileMap:[],verticalTileMap:[]},n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){this.checkEmojiMode(),this.generateBoard()}},{key:"checkEmojiMode",value:function(){window.navigator&&/Windows NT \d{2}/.test(window.navigator.userAgent)&&this.setState({useEmoji:!0})}},{key:"generateBoard",value:function(e,t,i){var n=this,s=[],a=[],o=t||this.state.boardWidth,r=i||this.state.boardHeight,c=0,d=-1,h=-1,u=isNaN(parseInt(e,10))?g()().int32()>>>0:parseInt(e,10)>>>0,m=g()(u),p=Object(l.a)(Array(34).keys()),f=0;window.navigator&&window.navigator.userAgent.includes("Chrome")&&window.navigator.userAgent.includes("Mobile")&&(p[4]=42);for(var b=p.length-1;b>0;b--)f=Math.floor(m()*(b+1)),d=p[b],p[b]=p[f],p[f]=d;for(var v=0;v<o+2;v++)c=s.push({id:c,char:null,inRemovalAnim:!1});for(var j=0;j<r;j++){c=s.push({id:c,char:null,inRemovalAnim:!1});for(var T=0;T<o;T++)0===(h=(h+1)%4)&&(d=(d+1)%p.length),a.push(c),c=s.push({id:c,char:p[d],inRemovalAnim:!1});c=s.push({id:c,char:null,inRemovalAnim:!1})}for(var A=0;A<o+2;A++)c=s.push({id:c,char:null,inRemovalAnim:!1});for(var O=a.length-1;O>0;O--)f=Math.floor(m()*(O+1)),d=s[a[O]].char,s[a[O]].char=s[a[f]].char,s[a[f]].char=d;console.log("Game board seed is ".concat(u)),this.setState({tiles:s,boardWidth:o,boardHeight:r,seed:u,selectedTile:null,hintedTiles:[],pathingTiles:[],pathingTilesAlt:[]},(function(){n.generateHorizontalMap(),n.generateVerticalMap()}))}},{key:"handleTileClick",value:function(e){var t=this;if(null!==this.state.tiles[e].char&&!0!==this.state.tiles[e].inRemovalAnim)if(this.state.selectedTile!==e){if(console.debug("Clicked ".concat(e)),null!==this.state.selectedTile&&this.state.tiles[e].char===this.state.tiles[this.state.selectedTile].char){var i=function(e,t,i,n,s){if(e===t)return null;var a=n+2,o=s+2,l=[],r=null,c=t%a-e%a,d=(t-t%a-(e-e%a))/a,h=0;console.debug("tile X delta: ".concat(c)),console.debug("tile Y delta: ".concat(d)),(0!==d||c>0)&&l.push([{segment:[e],dir:"R"}]),(0!==d||c<0)&&(c<0?l.push([{segment:[e],dir:"L"}]):l.unshift([{segment:[e],dir:"L"}])),(0!==c||d>0)&&(d>=0?l.push([{segment:[e],dir:"D"}]):l.unshift([{segment:[e],dir:"D"}])),(0!==c||d<0)&&l.push([{segment:[e],dir:"U"}]);for(var u=0;u<l.length;u++)console.debug(l[u]);for(;l.length>0;){var g=l.pop();if(h++,console.debug("Checking path: ".concat(g.at(-1).segment," | ").concat(g.at(-1).dir," | length: ").concat(g.length," | queue: ").concat(l.length)),null===r||3!==g.length){var m=g.at(-1),p=m.segment.at(-1),f=void 0;switch(m.dir){case"R":if((f=i[p+1]).id===t){if(console.debug("- Found simplest path?"),m.segment.push(f.id),g.length<3)return console.debug("-- It is!"),console.debug("".concat(h," PATHS EATEN")),g;console.debug("-- Maybe?"),r=g;continue}if(null!==f.char&&!0!==f.inRemovalAnim){console.debug("- Obstruction in path");continue}if(m.segment.push(f.id),g.length<3&&(2!==g.length||t%a===f.id%a))if(t<f.id){console.debug("- Add path U");var b=g.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));b.push({segment:[f.id],dir:"U"}),d<0?l.push(b):l.unshift(b)}else if(t>f.id){console.debug("- Add path D");var v=g.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));v.push({segment:[f.id],dir:"D"}),d>=0?l.push(v):l.unshift(v)}if(2===g.length&&t%a<f.id%a||f.id%a===a-1){console.debug("- Do not proceed further, will miss");continue}console.debug("- Continuing path"),c>=0?l.push(g):l.unshift(g);continue;case"L":if((f=i[p-1]).id===t){if(console.debug("- Found simplest path"),m.segment.push(f.id),g.length<3)return console.debug("-- It is!"),console.debug("".concat(h," PATHS EATEN")),g;console.debug("-- Maybe?"),r=g;continue}if(null!==f.char&&!0!==f.inRemovalAnim){console.debug("- Obstruction in path");continue}if(m.segment.push(f.id),g.length<3&&(2!==g.length||t%a===f.id%a))if(t<f.id){console.debug("- Add path U");var j=g.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));j.push({segment:[f.id],dir:"U"}),d<0?l.push(j):l.unshift(j)}else if(t>f.id){console.debug("- Add path D");var T=g.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));T.push({segment:[f.id],dir:"D"}),d>=0?l.push(T):l.unshift(T)}if(2===g.length&&t%a>f.id%a||f.id%a===0){console.debug("- Do not proceed further, will miss");continue}console.debug("- Continuing path"),c<0?l.push(g):l.unshift(g);continue;case"D":if((f=i[p+a]).id===t){if(console.debug("- Found simplest path"),m.segment.push(f.id),g.length<3)return console.debug("-- It is!"),console.debug("".concat(h," PATHS EATEN")),g;console.debug("-- Maybe?"),r=g;continue}if(null!==f.char&&!0!==f.inRemovalAnim){console.debug("- Obstruction in path");continue}if(m.segment.push(f.id),g.length<3&&(2!==g.length||t-t%a===f.id-f.id%a))if(t%a<f.id%a){console.debug("- Add path L");var A=g.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));A.push({segment:[f.id],dir:"L"}),c<0?l.push(A):l.unshift(A)}else if(t%a>f.id%a){console.debug("- Add path R");var O=g.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));O.push({segment:[f.id],dir:"R"}),c>=0?l.push(O):l.unshift(O)}if(2===g.length&&t<f.id||f.id>=a*(o-1)){console.debug("- Do not proceed further, will miss");continue}console.debug("- Continuing path"),d>=0?l.push(g):l.unshift(g);continue;case"U":if((f=i[p-a]).id===t){if(console.debug("- Found simplest path"),m.segment.push(f.id),g.length<3)return console.debug("-- It is!"),console.debug("".concat(h," PATHS EATEN")),g;console.debug("-- Maybe?"),r=g;continue}if(null!==f.char&&!0!==f.inRemovalAnim){console.debug("- Obstruction in path");continue}if(m.segment.push(f.id),g.length<3&&(2!==g.length||t-t%a===f.id-f.id%a))if(t%a<f.id%a){console.debug("- Add path L");var k=g.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));k.push({segment:[f.id],dir:"L"}),c<0?l.push(k):l.unshift(k)}else if(t%a>f.id%a){console.debug("- Add path R");var y=g.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));y.push({segment:[f.id],dir:"R"}),c>=0?l.push(y):l.unshift(y)}if(2===g.length&&t>f.id||f.id<a){console.debug("- Do not proceed further, will miss");continue}console.debug("- Continuing path"),d<0?l.push(g):l.unshift(g);continue}}else console.debug("- Looking for less-line paths")}return console.debug("".concat(h," PATHS EATEN")),r}(e,this.state.selectedTile,this.state.tiles.slice(),this.state.boardWidth,this.state.boardHeight);if(null!==i){console.debug(i);var n=this.state.tiles.slice();n.forEach((function(e){!0===e.inRemovalAnim&&(e.inRemovalAnim=!1,e.char=null)})),n[e].inRemovalAnim=!0,n[this.state.selectedTile].inRemovalAnim=!0;var s=this.state.tiles.map((function(){return[]}));return i.forEach((function(e){e.segment.forEach((function(t){s[t].push(e.dir)}))})),s[this.state.selectedTile].push("-start"),s[e].push("-end"),this.setState({tiles:n,selectedTile:null,hintedTiles:[]}),void(!0===this.state.useAltPathingTiles?this.setState({pathingTiles:this.state.tiles.map((function(){return[]})),pathingTilesAlt:s,useAltPathingTiles:!1}):this.setState({pathingTiles:s,pathingTilesAlt:this.state.tiles.map((function(){return[]})),useAltPathingTiles:!0}))}}if(!0!==this.state.showMatchingTiles)this.setState({selectedTile:e});else{var a=this.state.tiles.filter((function(i){return i.char===t.state.tiles[e].char}));this.setState({hintedTiles:a,selectedTile:e})}}else!0===this.state.allowDeselect&&(this.setState({selectedTile:null,hintedTiles:[]}),console.debug("Unclicked ".concat(e)))}},{key:"generateHorizontalMap",value:function(){for(var e=[],t=0;t<this.state.boardHeight+2;t++)e[t]=this.state.tiles.slice(t*(this.state.boardWidth+2),(t+1)*(this.state.boardWidth+2));this.setState({horizontalTileMap:e})}},{key:"renderHorizontalMap",value:function(){var e=this,t=[];if("undefined"!==typeof this.state.horizontalTileMap){for(var i=0;i<this.state.horizontalTileMap.length;i++)t[i]=Object(m.jsx)("div",{children:this.state.horizontalTileMap[i].map((function(t){return e.renderTile(t)}))},"board-hori-row"+i);return t}}},{key:"generateVerticalMap",value:function(){for(var e=this,t=[],i=function(i){t[i]=e.state.tiles.filter((function(t,n){return n%(e.state.boardWidth+2)===i})).reverse()},n=0;n<this.state.boardWidth+2;n++)i(n);this.setState({verticalTileMap:t})}},{key:"renderVerticalMap",value:function(){var e=this,t=[];if("undefined"!==typeof this.state.verticalTileMap){for(var i=0;i<this.state.verticalTileMap.length;i++)t[i]=Object(m.jsx)("div",{children:this.state.verticalTileMap[i].map((function(t){return e.renderTile(t)}))},"board-vert-row"+i);return t}}},{key:"renderTile",value:function(e){var t=this;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p,{tile:e.char,glyph:!this.state.useEmoji,selected:e.id===this.state.selectedTile,hinted:this.state.hintedTiles.includes(e)&&!e.inRemovalAnim,fade:e.inRemovalAnim,onClick:function(){return t.handleTileClick(e.id)}},e.id),Object(m.jsx)(f,{node:this.state.pathingTiles[e.id]},"node"+e.id),Object(m.jsx)(f,{node:this.state.pathingTilesAlt[e.id]},"altnode"+e.id)]})}},{key:"render",value:function(){var e=this;return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"game-board game-board-horizontal ".concat(this.state.useEmoji?"game-board-emoji":"game-board-glyph"),children:this.renderHorizontalMap()}),Object(m.jsx)("div",{className:"game-board game-board-vertical ".concat(this.state.useEmoji?"game-board-emoji":"game-board-glyph"),children:this.renderVerticalMap()}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){return e.setState((function(e){return{useEmoji:!e.useEmoji}}))},children:"Change tile type"}),Object(m.jsx)("button",{onClick:function(){return e.generateBoard(e.state.seed)},children:"Reset board"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){return e.generateBoard(null,8,5)},children:"New board (easy)"}),Object(m.jsx)("button",{onClick:function(){return e.generateBoard(null,12,7)},children:"New board (medium)"}),Object(m.jsx)("button",{onClick:function(){return e.generateBoard(null,17,8)},children:"New board (hard)"})]}),Object(m.jsxs)("div",{children:["Board #",this.state.seed]})]})})}}]),i}(s.a.Component);var v=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(b,{})})},j=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,30)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;i(e),n(e),s(e),a(e),o(e)}))};o.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(v,{})}),document.getElementById("root")),j()}},[[29,1,2]]]);
//# sourceMappingURL=main.3b34b530.chunk.js.map