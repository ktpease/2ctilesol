(this.webpackJsonp2ctilesol=this.webpackJsonp2ctilesol||[]).push([[0],{24:function(e,t,i){},25:function(e,t,i){},44:function(e,t){},46:function(e,t,i){},47:function(e,t,i){},48:function(e,t,i){},49:function(e,t,i){"use strict";i.r(t);var n=i(1),s=i.n(n),r=i(9),a=i.n(r),o=(i(24),i(25),i(5)),l=i(15),c=i(16),u=i(19),h=i(18),d=i(10),g=i.n(d);var f=i(6),m=i.n(f);var p=i(0);function v(e){var t=parseInt(e.tile,10);if(isNaN(t)||t<0||t>=43)return e.glyph?Object(p.jsx)("span",{className:"game-tile-glyph game-tile-empty",children:"\ud83c\udc2b\ufe0e"}):Object(p.jsx)("span",{className:"game-tile-emoji game-tile-empty",children:"\ud83c\udc2b"});var i="";if(e.selected?i="game-tile-selected":e.hinted?i="game-tile-hinted":e.highlighted&&(i="game-tile-highlighted"),e.glyph){var n="";return t>=7&&t<=15||4===t?n="game-tile-glyph-red":t>=16&&t<=24||5===t?n="game-tile-glyph-green":t>=25&&t<=33||6===t?n="game-tile-glyph-blue":t>=34&&t<=37?n="game-tile-glyph-flowers":t>=38&&t<=41&&(n="game-tile-glyph-seasons"),Object(p.jsxs)("span",{className:"game-tile-glyph ".concat(n," ").concat(i," ").concat(e.pointer?"game-tile-pointer":""," ").concat(e.fade?"game-tile-anim-fadeout":""),onClick:e.onClick,children:[String.fromCodePoint(126976+t),"\ufe0e"]})}return Object(p.jsx)("span",{className:"game-tile-emoji ".concat(i," ").concat(e.pointer?"game-tile-pointer":""," ").concat(e.fade?"game-tile-anim-fadeout":""),onClick:e.onClick,children:String.fromCodePoint(126976+t)})}function b(e){if(e.node&&e.node.length>0){var t="";return e.node.forEach((function(e,i){0===i&&(t="game-path-"),t=t.concat(e)})),Object(p.jsx)("span",{className:"game-path ".concat(t," game-path-anim-fadeout")})}return null}var j=i(17),w=s.a.forwardRef((function(e,t){var i=Object(j.useStopwatch)({autoStart:!0}),n=i.seconds,r=i.minutes,a=i.hours,o=i.start,l=i.pause,c=i.reset;return s.a.useImperativeHandle(t,(function(){return{start:o,pause:l,reset:c,seconds:n,minutes:r,hours:a}})),Object(p.jsxs)("span",{style:{textAlign:"center"},children:[a.toString().padStart(2,"0"),":",r.toString().padStart(2,"0"),":",n.toString().padStart(2,"0")]})}));i(46),i(47),i(48);g.a.setAppElement(document.getElementById("root"));var A=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(l.a)(this,i),(n=t.call(this,e)).gameStateVer=0,n.state={showSettingsModal:!1,useEmoji:!1,allowDeselect:!0,showMatchingTiles:!1,showAllValidMatches:!1,boardWidth:17,boardHeight:8,seed:1,tiles:[],selectedTile:null,tileHistory:[],hintedTiles:[],allValidMatchingTiles:[],pathingTiles:[],pathingTilesAlt:[],useAltPathingTiles:!1,horizontalTileMap:[],verticalTileMap:[]},n.timerRef=s.a.createRef(),n}return Object(c.a)(i,[{key:"componentDidMount",value:function(){var e=this;this.checkEmojiMode();var t=this.getStateFromLocal();if(null!==t&&"v"in t&&t.v===this.gameStateVer)try{this.setState({tiles:t.tiles.map((function(e,t){return{id:t,char:e,inRemovalAnim:!1}})),boardWidth:t.boardWidth,boardHeight:t.boardHeight,seed:t.seed,tileHistory:t.tileHistory},(function(){e.generateHorizontalMap(),e.generateVerticalMap(),e.checkAllValidMatches();var i=new Date;i.setSeconds(i.getSeconds()+t.timer.seconds+60*t.timer.minutes+3600*t.timer.hours),e.timerRef.current.reset(i)}))}catch(i){this.resetBoard(null,17,8)}else this.resetBoard()}},{key:"getStateFromLocal",value:function(){if("undefined"===typeof localStorage)return null;try{localStorage.setItem("test","1"),"1"===localStorage.getItem("test")&&localStorage.removeItem("test")}catch(t){return null}var e=localStorage.getItem("gamestate");return null!==e?JSON.parse(e):null}},{key:"saveStateToLocal",value:function(){if("undefined"!==typeof localStorage){try{localStorage.setItem("test","1"),"1"===localStorage.getItem("test")&&localStorage.removeItem("test")}catch(e){return}localStorage.setItem("gamestate",JSON.stringify({v:this.gameStateVer,tiles:this.state.tiles.map((function(e){return e.inRemovalAnim?null:e.char})),boardWidth:this.state.boardWidth,boardHeight:this.state.boardHeight,seed:this.state.seed,tileHistory:this.state.tileHistory,timer:{seconds:this.timerRef.current.seconds,minutes:this.timerRef.current.minutes,hours:this.timerRef.current.hours}}))}}},{key:"checkEmojiMode",value:function(){var e=this;navigator.userAgentData?navigator.userAgentData.getHighEntropyValues(["platform","platformVersion"]).then((function(t){"Windows"===t.platform&&parseInt(t.platformVersion)>=10&&e.setState({useEmoji:!0})})):window.navigator&&/Windows NT \d{2}/.test(window.navigator.userAgent)&&this.setState({useEmoji:!0})}},{key:"resetBoard",value:function(e,t,i,n){var s,r=this,a=t||this.state.boardWidth,l=i||this.state.boardHeight;s=n&&"simple"===n?function(e,t,i){var n=[],s=[],r=0,a=-1,l=-1,c=0,u=isNaN(parseInt(e,10))?m()().int32()>>>0:parseInt(e,10)>>>0,h=m()(u),d=Object(o.a)(Array(34).keys());(navigator.userAgentData?!0===navigator.userAgentData.brands.some((function(e){return"Chromium"===e.brand}))&&!0===navigator.userAgentData.mobile:window.navigator&&window.navigator.userAgent.includes("Chrome")&&window.navigator.userAgent.includes("Mobile"))&&(d[4]=42);for(var g=d.length-1;g>0;g--)c=Math.floor(h()*(g+1)),a=d[g],d[g]=d[c],d[c]=a;for(var f=0;f<t+2;f++)r=n.push({id:r,char:null,inRemovalAnim:!1});for(var p=0;p<i;p++){r=n.push({id:r,char:null,inRemovalAnim:!1});for(var v=0;v<t;v++)0===(l=(l+1)%4)&&(a=(a+1)%d.length),s.push(r),r=n.push({id:r,char:d[a],inRemovalAnim:!1});r=n.push({id:r,char:null,inRemovalAnim:!1})}for(var b=0;b<t+2;b++)r=n.push({id:r,char:null,inRemovalAnim:!1});for(var j=s.length-1;j>0;j--)c=Math.floor(h()*(j+1)),a=n[s[j]].char,n[s[j]].char=n[s[c]].char,n[s[c]].char=a;return{tiles:n,seed:u}}(e,a,l):function(e,t,i){for(var n=[],s=0,r=-1,a=0,l=isNaN(parseInt(e,10))?m()().int32()>>>0:parseInt(e,10)>>>0,c=m()(l),u=Object(o.a)(Array(34).keys()),h=t*i>>1,d=u.concat(u).sort((function(e,t){return e-t}));d.length<h;){for(var g=u.slice(),f=g.length-1;f>0;f--)a=Math.floor(c()*(f+1)),r=g[f],g[f]=g[a],g[a]=r;d=d.concat(g)}d=d.slice(0,h),(navigator.userAgentData?!0===navigator.userAgentData.brands.some((function(e){return"Chromium"===e.brand}))&&!0===navigator.userAgentData.mobile:window.navigator&&window.navigator.userAgent.includes("Chrome")&&window.navigator.userAgent.includes("Mobile"))&&(d=d.map((function(e){return 4===e?42:e})));for(var p=d.length-1;p>0;p--)a=Math.floor(c()*(p+1)),r=d[p],d[p]=d[a],d[a]=r;for(var v=0;v<t+2;v++)s=n.push({id:s,char:null,inRemovalAnim:!1});for(var b=0;b<i;b++){s=n.push({id:s,char:null,inRemovalAnim:!1});for(var j=0;j<t;j++)s=n.push({id:s,char:-1,inRemovalAnim:!1});s=n.push({id:s,char:null,inRemovalAnim:!1})}for(var w=0;w<t+2;w++)s=n.push({id:s,char:null,inRemovalAnim:!1});for(var A=[],T=t+2;T<n.length-(t+2);T++)-1!==n[T].char||-1===n[T-1].char&&-1===n[T+1].char&&-1===n[T-(t+2)].char&&-1===n[T+(t+2)].char||A.push(T);for(var S=function(e){var s=A[Math.floor(c()*A.length)];-1!==n[s-1].char||A.includes(s-1)||A.push(s-1),-1!==n[s+1].char||A.includes(s+1)||A.push(s+1),-1!==n[s-(t+2)].char||A.includes(s-(t+2))||A.push(s-(t+2)),-1!==n[s+(t+2)].char||A.includes(s+(t+2))||A.push(s+(t+2)),A=A.filter((function(e){return e!==s}));var r=function(e,t,i,n,s){var r=i+2,a=n+2,o=[],l=s.slice(),c=[],u=[];l.forEach((function(e){c.push(e%r),u.push(e-e%r)})),l.length>1&&(c.sort((function(e,t){return e-t})),u.sort((function(e,t){return e-t})));var h=[];for(h.push([{segment:[e],dir:"R"}]),h.push([{segment:[e],dir:"L"}]),h.push([{segment:[e],dir:"U"}]),h.push([{segment:[e],dir:"D"}]);h.length>0;){var d=h.pop(),g=d.at(-1),f=g.segment.at(-1),m=void 0;switch(g.dir){case"R":if(m=t[f+1],l.includes(m.id)){if(o.push({tile:m.id,lines:d.length}),l.splice(l.indexOf(m.id),1),0===l.length)break;l.forEach((function(e){c.push(e%r),u.push(e-e%r)})),l.length>1&&(c.sort((function(e,t){return e-t})),u.sort((function(e,t){return e-t})));continue}if(-1===m.char)continue;if(g.segment.push(m.id),d.length<3&&(2!==d.length||c.includes(m.id%r))){if(u[0]<m.id-m.id%r){var p=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));p.push({segment:[m.id],dir:"U"}),h.push(p)}if(u.at(-1)>m.id-m.id%r){var v=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));v.push({segment:[m.id],dir:"D"}),h.push(v)}}if(2===d.length&&c.at(-1)<m.id%r||m.id%r===r-1)continue;h.push(d);continue;case"L":if(m=t[f-1],l.includes(m.id)){if(o.push({tile:m.id,lines:d.length}),l.splice(l.indexOf(m.id),1),0===l.length)break;l.forEach((function(e){c.push(e%r),u.push(e-e%r)})),l.length>1&&(c.sort((function(e,t){return e-t})),u.sort((function(e,t){return e-t})));continue}if(-1===m.char)continue;if(g.segment.push(m.id),d.length<3&&(2!==d.length||c.includes(m.id%r))){if(u[0]<m.id-m.id%r){var b=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));b.push({segment:[m.id],dir:"U"}),h.push(b)}if(u.at(-1)>m.id-m.id%r){var j=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));j.push({segment:[m.id],dir:"D"}),h.push(j)}}if(2===d.length&&c[0]>m.id%r||m.id%r===0)continue;h.push(d);continue;case"D":if(m=t[f+r],l.includes(m.id)){if(o.push({tile:m.id,lines:d.length}),l.splice(l.indexOf(m.id),1),0===l.length)break;l.forEach((function(e){c.push(e%r),u.push(e-e%r)})),l.length>1&&(c.sort((function(e,t){return e-t})),u.sort((function(e,t){return e-t})));continue}if(-1===m.char)continue;if(g.segment.push(m.id),d.length<3&&(2!==d.length||u.includes(m.id-m.id%r))){if(c[0]<m.id%r){var w=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));w.push({segment:[m.id],dir:"L"}),h.push(w)}if(c.at(-1)>m.id%r){var A=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));A.push({segment:[m.id],dir:"R"}),h.push(A)}}if(2===d.length&&u.at(-1)<m.id-m.id%r||m.id>=r*(a-1))continue;h.push(d);continue;case"U":if(m=t[f-r],l.includes(m.id)){if(o.push({tile:m.id,lines:d.length}),l.splice(l.indexOf(m.id),1),0===l.length)break;l.forEach((function(e){c.push(e%r),u.push(e-e%r)})),l.length>1&&(c.sort((function(e,t){return e-t})),u.sort((function(e,t){return e-t})));continue}if(-1===m.char)continue;if(g.segment.push(m.id),d.length<3&&(2!==d.length||u.includes(m.id-m.id%r))){if(c[0]<m.id%r){var T=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));T.push({segment:[m.id],dir:"L"}),h.push(T)}if(c.at(-1)>m.id%r){var S=d.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));S.push({segment:[m.id],dir:"R"}),h.push(S)}}if(2===d.length&&u[0]>m.id-m.id%r||m.id<r)continue;h.push(d);continue}}return o}(s,n,t,i,A);if(void 0===r||0===r.length)return console.warn("Presolve-shuffle detected an unmatching tile! This is bad."),"continue";var a=r.filter((function(e){return e.lines>1})),o=a.length>0?a[Math.floor(c()*a.length)].tile:r[Math.floor(c()*r.length)].tile;n[s].char=d[e],n[o].char=d[e],-1!==n[o-1].char||A.includes(o-1)||A.push(o-1),-1!==n[o+1].char||A.includes(o+1)||A.push(o+1),-1!==n[o-(t+2)].char||A.includes(o-(t+2))||A.push(o-(t+2)),-1!==n[o+(t+2)].char||A.includes(o+(t+2))||A.push(o+(t+2)),A=A.filter((function(e){return e!==o}))},M=0;M<h;M++)S(M);return{tiles:n,seed:l}}(e,a,l),this.setState({tiles:s.tiles,boardWidth:a,boardHeight:l,seed:s.seed,selectedTile:null,tileHistory:[],hintedTiles:[],allValidMatches:[],pathingTiles:[],pathingTilesAlt:[],showSettingsModal:!1},(function(){r.generateHorizontalMap(),r.generateVerticalMap(),r.checkAllValidMatches(),r.timerRef.current.reset(),r.saveStateToLocal()}))}},{key:"checkAllValidMatches",value:function(){var e=function(e,t,i){var n=t+2,s=i+2,r=[];return e.forEach((function(t){if(null!==t.char&&!0!==t.inRemovalAnim){for(var i=[],a=t.id+1;a<e.length;a++)e[a].char===t.char&&!1===e[a].inRemovalAnim&&i.push(a);if(0!==i.length){var o=[],l=[];i.forEach((function(e){o.push(e%n),l.push(e-e%n)})),i.length>1&&(o.sort((function(e,t){return e-t})),l.sort((function(e,t){return e-t})));var c=[];for(c.push([{segment:[t.id],dir:"R"}]),c.push([{segment:[t.id],dir:"L"}]),c.push([{segment:[t.id],dir:"U"}]),c.push([{segment:[t.id],dir:"D"}]);c.length>0;){var u=c.pop(),h=u.at(-1),d=h.segment.at(-1),g=void 0;switch(h.dir){case"R":if(g=e[d+1],i.includes(g.id)){if(r.push([t.id,g.id]),i.splice(i.indexOf(g.id),1),0===i.length)break;i.forEach((function(e){o.push(e%n),l.push(e-e%n)})),i.length>1&&(o.sort((function(e,t){return e-t})),l.sort((function(e,t){return e-t})));continue}if(null!==g.char&&!0!==g.inRemovalAnim)continue;if(h.segment.push(g.id),u.length<3&&(2!==u.length||o.includes(g.id%n))){if(l[0]<g.id-g.id%n){var f=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));f.push({segment:[g.id],dir:"U"}),c.push(f)}if(l.at(-1)>g.id-g.id%n){var m=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));m.push({segment:[g.id],dir:"D"}),c.push(m)}}if(2===u.length&&o.at(-1)<g.id%n||g.id%n===n-1)continue;c.push(u);continue;case"L":if(g=e[d-1],i.includes(g.id)){if(r.push([t.id,g.id]),i.splice(i.indexOf(g.id),1),0===i.length)break;i.forEach((function(e){o.push(e%n),l.push(e-e%n)})),i.length>1&&(o.sort((function(e,t){return e-t})),l.sort((function(e,t){return e-t})));continue}if(null!==g.char&&!0!==g.inRemovalAnim)continue;if(h.segment.push(g.id),u.length<3&&(2!==u.length||o.includes(g.id%n))){if(l[0]<g.id-g.id%n){var p=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));p.push({segment:[g.id],dir:"U"}),c.push(p)}if(l.at(-1)>g.id-g.id%n){var v=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));v.push({segment:[g.id],dir:"D"}),c.push(v)}}if(2===u.length&&o[0]>g.id%n||g.id%n===0)continue;c.push(u);continue;case"D":if(g=e[d+n],i.includes(g.id)){if(r.push([t.id,g.id]),i.splice(i.indexOf(g.id),1),0===i.length)break;i.forEach((function(e){o.push(e%n),l.push(e-e%n)})),i.length>1&&(o.sort((function(e,t){return e-t})),l.sort((function(e,t){return e-t})));continue}if(null!==g.char&&!0!==g.inRemovalAnim)continue;if(h.segment.push(g.id),u.length<3&&(2!==u.length||l.includes(g.id-g.id%n))){if(o[0]<g.id%n){var b=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));b.push({segment:[g.id],dir:"L"}),c.push(b)}if(o.at(-1)>g.id%n){var j=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));j.push({segment:[g.id],dir:"R"}),c.push(j)}}if(2===u.length&&l.at(-1)<g.id-g.id%n||g.id>=n*(s-1))continue;c.push(u);continue;case"U":if(g=e[d-n],i.includes(g.id)){if(r.push([t.id,g.id]),i.splice(i.indexOf(g.id),1),0===i.length)break;i.forEach((function(e){o.push(e%n),l.push(e-e%n)})),i.length>1&&(o.sort((function(e,t){return e-t})),l.sort((function(e,t){return e-t})));continue}if(null!==g.char&&!0!==g.inRemovalAnim)continue;if(h.segment.push(g.id),u.length<3&&(2!==u.length||l.includes(g.id-g.id%n))){if(o[0]<g.id%n){var w=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));w.push({segment:[g.id],dir:"L"}),c.push(w)}if(o.at(-1)>g.id%n){var A=u.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));A.push({segment:[g.id],dir:"R"}),c.push(A)}}if(2===u.length&&l[0]>g.id-g.id%n||g.id<n)continue;c.push(u);continue}}}}})),r}(this.state.tiles,this.state.boardWidth,this.state.boardHeight);this.setState({allValidMatchingTiles:Object(o.a)(new Set(e.flat()))})}},{key:"handleTileClick",value:function(e){var t=this;if(null!==this.state.tiles[e].char&&!0!==this.state.tiles[e].inRemovalAnim)if(this.state.selectedTile!==e){if(null!==this.state.selectedTile&&this.state.tiles[e].char===this.state.tiles[this.state.selectedTile].char){var i=function(e,t,i,n,s){if(e===t)return null;var r=n+2,a=s+2,o=[],l=null,c=t%r-e%r,u=(t-t%r-(e-e%r))/r;for((0!==u||c>0)&&o.push([{segment:[e],dir:"R"}]),(0!==u||c<0)&&(c<0?o.push([{segment:[e],dir:"L"}]):o.unshift([{segment:[e],dir:"L"}])),(0!==c||u>0)&&(u>=0?o.push([{segment:[e],dir:"D"}]):o.unshift([{segment:[e],dir:"D"}])),(0!==c||u<0)&&o.push([{segment:[e],dir:"U"}]);o.length>0;){var h=o.pop();if(null===l||3!==h.length){var d=h.at(-1),g=d.segment.at(-1),f=void 0;switch(d.dir){case"R":if((f=i[g+1]).id===t){if(d.segment.push(f.id),h.length<3)return h;l=h;continue}if(null!==f.char&&!0!==f.inRemovalAnim)continue;if(d.segment.push(f.id),h.length<3&&(2!==h.length||t%r===f.id%r))if(t-t%r<f.id-f.id%r){var m=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));m.push({segment:[f.id],dir:"U"}),u<0?o.push(m):o.unshift(m)}else if(t-t%r>f.id-f.id%r){var p=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));p.push({segment:[f.id],dir:"D"}),u>=0?o.push(p):o.unshift(p)}if(2===h.length&&t%r<f.id%r||f.id%r===r-1)continue;c>=0?o.push(h):o.unshift(h);continue;case"L":if((f=i[g-1]).id===t){if(d.segment.push(f.id),h.length<3)return h;l=h;continue}if(null!==f.char&&!0!==f.inRemovalAnim)continue;if(d.segment.push(f.id),h.length<3&&(2!==h.length||t%r===f.id%r))if(t-t%r<f.id-f.id%r){var v=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));v.push({segment:[f.id],dir:"U"}),u<0?o.push(v):o.unshift(v)}else if(t-t%r>f.id-f.id%r){var b=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));b.push({segment:[f.id],dir:"D"}),u>=0?o.push(b):o.unshift(b)}if(2===h.length&&t%r>f.id%r||f.id%r===0)continue;c<0?o.push(h):o.unshift(h);continue;case"D":if((f=i[g+r]).id===t){if(d.segment.push(f.id),h.length<3)return h;l=h;continue}if(null!==f.char&&!0!==f.inRemovalAnim)continue;if(d.segment.push(f.id),h.length<3&&(2!==h.length||t-t%r===f.id-f.id%r))if(t%r<f.id%r){var j=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));j.push({segment:[f.id],dir:"L"}),c<0?o.push(j):o.unshift(j)}else if(t%r>f.id%r){var w=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));w.push({segment:[f.id],dir:"R"}),c>=0?o.push(w):o.unshift(w)}if(2===h.length&&t-t%r<f.id-f.id%r||f.id>=r*(a-1))continue;u>=0?o.push(h):o.unshift(h);continue;case"U":if((f=i[g-r]).id===t){if(d.segment.push(f.id),h.length<3)return h;l=h;continue}if(null!==f.char&&!0!==f.inRemovalAnim)continue;if(d.segment.push(f.id),h.length<3&&(2!==h.length||t-t%r===f.id-f.id%r))if(t%r<f.id%r){var A=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));A.push({segment:[f.id],dir:"L"}),c<0?o.push(A):o.unshift(A)}else if(t%r>f.id%r){var T=h.map((function(e){return{segment:[].concat(e.segment),dir:e.dir}}));T.push({segment:[f.id],dir:"R"}),c>=0?o.push(T):o.unshift(T)}if(2===h.length&&t-t%r>f.id-f.id%r||f.id<r)continue;u<0?o.push(h):o.unshift(h);continue}}}return l}(e,this.state.selectedTile,this.state.tiles.slice(),this.state.boardWidth,this.state.boardHeight);if(null!==i){var n=this.state.tiles.slice();n.forEach((function(e){!0===e.inRemovalAnim&&(e.inRemovalAnim=!1,e.char=null)})),n[e].inRemovalAnim=!0,n[this.state.selectedTile].inRemovalAnim=!0;var s=this.state.tileHistory.slice();s.push({char:this.state.tiles[e].char,tile1:e,tile2:this.state.selectedTile});var r=this.state.tiles.map((function(){return[]}));return i.forEach((function(e){e.segment.forEach((function(t){r[t].push(e.dir)}))})),r[this.state.selectedTile].push("-start"),r[e].push("-end"),this.setState({tiles:n,selectedTile:null,tileHistory:s,hintedTiles:[]},(function(){t.checkAllValidMatches(),t.saveStateToLocal()})),void(!0===this.state.useAltPathingTiles?this.setState((function(e){return{pathingTiles:e.tiles.map((function(){return[]})),pathingTilesAlt:r,useAltPathingTiles:!1}})):this.setState((function(e){return{pathingTiles:r,pathingTilesAlt:e.tiles.map((function(){return[]})),useAltPathingTiles:!0}})))}}if(!0!==this.state.showMatchingTiles)this.setState({selectedTile:e});else{var a=this.state.tiles.filter((function(i){return i.char===t.state.tiles[e].char}));this.setState({hintedTiles:a,selectedTile:e})}}else!0===this.state.allowDeselect&&this.setState({selectedTile:null,hintedTiles:[]})}},{key:"undoMatch",value:function(){var e=this;if(this.state.tileHistory.length>0){var t=this.state.tiles.slice(),i=this.state.tileHistory.pop();t[i.tile1].char=i.char,t[i.tile1].inRemovalAnim=!1,t[i.tile2].char=i.char,t[i.tile2].inRemovalAnim=!1,this.setState({tiles:t,hintedTiles:[],pathingTiles:[],pathingTilesAlt:[],selectedTile:null},(function(){e.checkAllValidMatches(),e.saveStateToLocal()}))}}},{key:"showSettingsModal",value:function(){this.timerRef.current.pause(),this.setState({showSettingsModal:!0})}},{key:"hideSettingsModal",value:function(){this.timerRef.current.start(),this.setState({showSettingsModal:!1})}},{key:"generateHorizontalMap",value:function(){for(var e=[],t=0;t<this.state.boardHeight+2;t++)e[t]=this.state.tiles.slice(t*(this.state.boardWidth+2),(t+1)*(this.state.boardWidth+2));this.setState({horizontalTileMap:e})}},{key:"renderHorizontalMap",value:function(){var e=this,t=[];if("undefined"!==typeof this.state.horizontalTileMap){for(var i=0;i<this.state.horizontalTileMap.length;i++)t[i]=Object(p.jsx)("div",{children:this.state.horizontalTileMap[i].map((function(t){return e.renderTileAndPath(t,"hori")}))},"board-hori-row"+i);return t}}},{key:"generateVerticalMap",value:function(){for(var e=this,t=[],i=function(i){t[i]=e.state.tiles.filter((function(t,n){return n%(e.state.boardWidth+2)===i})).reverse()},n=0;n<this.state.boardWidth+2;n++)i(n);this.setState({verticalTileMap:t})}},{key:"renderVerticalMap",value:function(){var e=this,t=[];if("undefined"!==typeof this.state.verticalTileMap){for(var i=0;i<this.state.verticalTileMap.length;i++)t[i]=Object(p.jsx)("div",{children:this.state.verticalTileMap[i].map((function(t){return e.renderTileAndPath(t,"vert")}))},"board-vert-row"+i);return t}}},{key:"renderTileAndPath",value:function(e,t){var i=this;return Object(p.jsxs)("span",{children:[Object(p.jsx)(v,{tile:e.char,glyph:!this.state.useEmoji,selected:e.id===this.state.selectedTile,hinted:this.state.hintedTiles.includes(e)&&!e.inRemovalAnim,highlighted:this.state.showAllValidMatches&&this.state.allValidMatchingTiles.includes(e.id),fade:e.inRemovalAnim,onClick:function(){return i.handleTileClick(e.id)}}),Object(p.jsx)(b,{node:this.state.pathingTiles[e.id]}),Object(p.jsx)(b,{node:this.state.pathingTilesAlt[e.id]})]},e.id)}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"game-board game-board-horizontal game-board-size-".concat(this.state.boardHeight," ").concat(this.state.useEmoji?"game-board-emoji":"game-board-glyph"),children:this.renderHorizontalMap()}),Object(p.jsx)("div",{className:"game-board game-board-vertical game-board-size-".concat(this.state.boardHeight," ").concat(this.state.useEmoji?"game-board-emoji":"game-board-glyph"),children:this.renderVerticalMap()})]}),Object(p.jsxs)("div",{className:"game-bar",children:[Object(p.jsx)(w,{ref:this.timerRef}),Object(p.jsx)("button",{className:"settings-button ".concat(this.state.showSettingsModal?"settings-button-opened":""),onClick:function(){return e.showSettingsModal()},children:"\u2261"}),Object(p.jsx)("button",{className:"undo-button",onClick:function(){return e.undoMatch()},disabled:0===this.state.tileHistory.length,children:"\u2b8c"})]}),Object(p.jsxs)(g.a,{isOpen:this.state.showSettingsModal,contentLabel:"Settings",onRequestClose:function(){return e.hideSettingsModal()},shouldCloseOnOverlayClick:!1,children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:["Board #",this.state.seed]}),Object(p.jsx)("button",{onClick:function(){return e.setState((function(e){return{useEmoji:!e.useEmoji}}))},children:"Change tile type"}),Object(p.jsx)("button",{onClick:function(){return e.resetBoard(e.state.seed)},children:"Reset board"}),Object(p.jsx)("button",{onClick:function(){return e.undoMatch()},disabled:0===this.state.tileHistory.length,children:"Undo"})]}),Object(p.jsxs)("div",{children:["Current number of tiles that can be matched:"," ",this.state.allValidMatchingTiles.length]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:function(){return e.resetBoard(null,8,5)},children:"New board (easy)"}),Object(p.jsx)("button",{onClick:function(){return e.resetBoard(null,12,7)},children:"New board (medium)"}),Object(p.jsx)("button",{onClick:function(){return e.resetBoard(null,17,8)},children:"New board (hard)"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:function(){return e.resetBoard(null,8,5,"simple")},children:"New board (easy, pure random)"}),Object(p.jsx)("button",{onClick:function(){return e.resetBoard(null,12,7,"simple")},children:"New board (medium, pure random)"}),Object(p.jsx)("button",{onClick:function(){return e.resetBoard(null,17,8,"simple")},children:"New board (hard, pure random)"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:function(){return e.setState((function(e){return{showAllValidMatches:!e.showAllValidMatches}}))},children:"Toggle Highlight All Matches"}),Object(p.jsx)("button",{onClick:function(){return e.setState((function(e){return{showMatchingTiles:!e.showMatchingTiles}}))},children:"Toggle Highlight Matching Tiles"})]}),Object(p.jsx)("button",{onClick:function(){return e.hideSettingsModal()},children:"Close Modal"})]})]})}}]),i}(s.a.Component);var T=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(A,{})})},S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function M(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var i=e.installing;null!=i&&(i.onstatechange=function(){"installed"===i.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var k=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,50)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;i(e),n(e),s(e),r(e),a(e)}))};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(T,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/2ctilesol",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/2ctilesol","/service-worker.js");S?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(i){var n=i.headers.get("content-type");404===i.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):M(e,t)})).catch((function(){}))}(t,e),navigator.serviceWorker.ready.then((function(){}))):M(t,e)}))}}(),k()}},[[49,1,2]]]);
//# sourceMappingURL=main.3e261181.chunk.js.map